

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transform Frames &mdash; Zawiki</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/default.js"></script>
        <script type="text/javascript" src="../../_static/wavedrom.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Licenses" href="../licenses/index.html" />
    <link rel="prev" title="RViz" href="rviz.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Zawiki
          

          
            
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v0.11-1-g7edcc8e
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Operating Systems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../os/linux/index.html">Linux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../os/linux/commandline/index.html">Commandline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/commandline/cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/commandline/crontab.html">Crontab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/commandline/general.html">General Shell Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/commandline/network.html">Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/commandline/rsync.html">RSync</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../os/linux/scripts/index.html">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/scripts/config_files.html">Config Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/scripts/general.html">Scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../os/linux/tools/index.html">Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/tools/dd.html">dd and ddfldd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/tools/lets_encrypt.html">Let’s Encrypt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/tools/systemd.html">Systemd</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../os/linux/ubuntu/index.html">Ubuntu</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/ubuntu/install.html">Installation and Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/ubuntu/intro.html">Introduction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../os/linux/filesystem/index.html">Filesystem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/filesystem/files.html">Important Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../os/linux/filesystem/folders.html">Folders</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../os/mac/index.html">Mac</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../os/mac/geektool.html">Geektool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../os/mac/keyboard.html">Keyboard Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../os/mac/macport.html">Macport</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../os/win/index.html">Windows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../os/win/firewall.html">Firewall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../os/win/group_policies.html">Group Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../os/win/registry_location.html">Registry</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Useful Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/git/index.html">Git</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/git/commands.html">Git Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/git/flow.html">Git Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/git/general.html">Git General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/git/submodules.html">Git Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/jupyter/index.html">Jupyter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/jupyter/common_functions.html">Common Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/jupyter/extensions.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/jupyter/general.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/jupyter/install_plotly_dash.html">Plotly Dash</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/jupyter/installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/pandoc/index.html">Pandoc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pandoc/intro.html">Pandoc</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Coding</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ahk/index.html">AutoHotKey AHK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ahk/intro.html">Tips &amp; Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ahk/key_definitions.html">Key Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ahk/tips_tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../python/docstring.html">Docstring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/flake8.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/general.html">Flake 8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/pip_general.html">PIP</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ROS - Robot Operating System</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="books-summary.html">Books summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="catkin_tools.html">Catkin Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commandline Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="launch.html">Launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="lidar-driver.html">Lidar Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages-ext.html">External Packages and Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="rviz.html">RViz</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Transform Frames</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../licenses/index.html">Licenses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../licenses/All_RIGHTS_RESERVED.html">All rights reserved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../licenses/MIT.html">MIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../licenses/WTFPL.html">WTFPL</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Writing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../writing/latex/index.html">LaTeX</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../writing/latex/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../writing/latex/install.html">Installation LaTeX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../writing/rst/index.html">ReStructuredText</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../writing/rst/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../writing/rst/cheatsheet.html">RST and Sphinx Cheatsheet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../writing/emoji/index.html">Emoji</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../writing/emoji/all.html">All Emoji</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../writing/emoji/curated.html">Curated Emoji</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../writing/md/index.html">Markdown</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../writing/md/md_github.html">Github Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../writing/md/md_github.html#h1">H1</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Else</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../multimedia/index.html">Multimedia</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../multimedia/books/books.html">Book Review</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multimedia/jokes/programmer_jokes.html">Programmer Jokes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multimedia/quotes/quotes.html">Inspirational Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multimedia/fonts/fonts.html">Fonts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multimedia/icons/icons.html">Icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multimedia/videos/resolutions.html">Resolutions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../security/gnupg.html">GnuPg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/password.html">Password</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/tor.html">Tor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/about.html">About</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/credits.html">Credits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/getting_started.html">How to use Sphinx Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/howtodocument.html">HACK this documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/license.html">License</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zawiki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">ROS - Robot Operating System</a> &raquo;</li>
        
      <li>Transform Frames</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/tschinz/zawiki/blob/mastersource/coding/ros/tf2.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transform-frames">
<h1>Transform Frames<a class="headerlink" href="#transform-frames" title="Permalink to this headline">¶</a></h1>
<p>A frame in the ROS language is a specific coordinate system in the space. ROS abstracts elements of a robot as coordinates frames. Each physical part of a robot that has a particular meaning will most likely have its own frame :</p>
<ul class="simple">
<li><p>a sensor : <em>laser_frame</em></p></li>
<li><p>an arm : <em>left_arm_frame</em></p></li>
</ul>
<p>It is up to the programmer to create frames where it is necessary, but some frames are already defined by ROS (see below).</p>
<p>Each frame has it own origin and coordinate system :</p>
<div class="figure align-center" id="id1">
<img alt="coordinate frame axis" src="../../_images/tf_origin.png" />
<p class="caption"><span class="caption-text">coordinate frame axis</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>To keep trace of the frames in the whole coordinate system, they must all refer to a main frame. Knowing the position of the main frame and the relative positions of all the other frames, ROS is able to know the exact position of each frame all continuously.</p>
<p>The TF2 package tracks the coordinate frames. There are several predefined frames :</p>
<ul class="simple">
<li><p><em>world</em> : kind of the parent of all the frames, does not move, there is only one single <em>world</em></p></li>
<li><p><em>map</em> : child of <em>world</em>, can be freely fixed in the world frame, does not move compared to the <em>world</em>, but it can be several <em>map</em> frames in a <em>world</em> (usually one <em>map</em> per robot)</p></li>
<li><p><em>odom</em> : child of <em>map</em>, fixed at the start point of the robot in the <em>map</em> frame, does not move compared to <em>world</em> and <em>map</em></p></li>
<li><p><em>base_link</em> : kind of the reference frame of a robot, it is moving in <em>odom</em>, therefore moving in <em>map</em> and <em>world</em></p></li>
<li><p>…</p></li>
</ul>
<p>The TF tree shows the relations between the frames :</p>
<div class="figure align-center" id="id2">
<img alt="tf tree" src="../../_images/tf_tree.png" />
<p class="caption"><span class="caption-text">tf tree</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>One can create coordinate frames for each part of the robot that needs to be tracked, for example :</p>
<ul class="simple">
<li><p><em>scanner_frame</em> : position of the scanner on a robot, somehow linked to the <em>base_link</em></p></li>
<li><p><em>wheels_frame</em> : position of the wheels on a robot, somehow linked to the <em>base_link</em></p></li>
</ul>
<p>The links between the <em>base_link</em> and the other frames can be direct, or they can be relative to it via other frames.</p>
<p>They are linked together by TF (transform frames). TF can be either static, which means that the relation between two frames will never change (for example two sensors being fixed 1 meter away), or dynamic when the relation evolves in the time (for example the arm of a robot compared to its head).</p>
<p>Let us use the example our two LIDAR sensor : they are oriented in the same way, they are on the same table, the only difference being there is 2.15 meter between them. For this example, they will never move nor rotate. We can use the node <em>static_transform_publisher</em> to inform other nodes that will use their data of their relative position. We will also fix them in the <em>world</em>, <em>map</em> and <em>base_link</em> frame.</p>
<p>Since the <em>base_link</em> frame will not move neither, it will also be fixed to the <em>map</em> by a static transform. The static transformations are called as a node from a launcher :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;launch&gt;</span>
      <span class="c">&lt;!-- From world to map, same origin --&gt;</span>
      <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;tf2_ros&quot;</span> <span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span> <span class="na">name=</span><span class="s">&quot;world_to_map&quot;</span>
            <span class="na">args=</span><span class="s">&quot;0 0 0 0 0 0 /world /map&quot;</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- From map to base_link, fixed in this case --&gt;</span>
      <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;tf2_ros&quot;</span> <span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span> <span class="na">name=</span><span class="s">&quot;map_to_base_link&quot;</span>
            <span class="na">args=</span><span class="s">&quot;0 0 0 0 0 0 /map /base_link&quot;</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- From base_link to laser_frame1, position of the first lidar --&gt;</span>
      <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;tf2_ros&quot;</span> <span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span> <span class="na">name=</span><span class="s">&quot;base_link_to_lidar1&quot;</span>
            <span class="na">args=</span><span class="s">&quot;0 0 0 0 0 0 /base_link /lidar1_frame&quot;</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- From base_link to laser_frame2, position of the second lidar --&gt;</span>
      <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;tf2_ros&quot;</span> <span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span> <span class="na">name=</span><span class="s">&quot;base_link_to_lidar2&quot;</span>
            <span class="na">args=</span><span class="s">&quot;-2.15 -0.01 0 0 0 0 /base_link /lidar2_frame&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
<p>Which will produce the following TF tree :</p>
<div class="figure align-center" id="id3">
<img alt="lidar tf tree" src="../../_images/tf_tree_lidar.png" />
<p class="caption"><span class="caption-text">lidar tf tree</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The arguments are :</p>
<ul class="simple">
<li><p>translations in X, Y, Z</p></li>
<li><p>rotations around X, Y, Z</p></li>
<li><p>parent <em>frame_id</em></p></li>
<li><p>child <em>frame_id</em></p></li>
</ul>
<p>Each topic has a reference frame. This means that each message being published on a topic kind of contains the position “from where it comes”. This is the <em>frame_id</em> parameter. The node that will published the data of the LIDAR shall publish them with the right <em>frame_id</em>, otherwise the TF tree will not be able to link all the TF together.</p>
<p>Documentation about frames and transformations can be found there :</p>
<ul class="simple">
<li><p><a class="reference external" href="http://wiki.ros.org/tf2">tf2</a></p></li>
</ul>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../licenses/index.html" class="btn btn-neutral float-right" title="Licenses" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rviz.html" class="btn btn-neutral float-left" title="RViz" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 tschinz

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>