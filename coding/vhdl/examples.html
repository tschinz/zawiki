

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Examples &#8212; Zawiki</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/copy_button.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/default.js"></script>
    <script src="../../_static/wavedrom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="File" href="file.html" />
    <link rel="prev" title="Conversion" href="conversion.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../index.html">
      <img src="../../_static/logo.svg" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../os/index.html">OS</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../tools/index.html">Tools</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../index.html">Coding</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../writing/index.html">Writing</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../multimedia/index.html">Multimedia</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../security/index.html">Security</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../about/index.html">About</a>
        </li>
        
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the wiki" aria-label="Search the wiki" autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/tschinz/zawiki" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/tschinz" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">



<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#blinker" class="nav-link">Blinker</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#settings" class="nav-link">Settings</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#bram" class="nav-link">BRAM</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#definition" class="nav-link">Definition</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#rom-definition" class="nav-link">ROM Definition</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#ram-definition" class="nav-link">RAM Definition</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#initialisation" class="nav-link">Initialisation</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#mif-file" class="nav-link">MIF-File</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#hex-file" class="nav-link">HEX-File</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h5">
            <a href="#format" class="nav-link">Format</a>
        </li>
    
        <li class="nav-item toc-entry toc-h5">
            <a href="#example" class="nav-link">Example</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#binary-file" class="nav-link">Binary-File</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#in-vhdl" class="nav-link">In VHDL</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#syntesis-tool-limitation" class="nav-link">Syntesis Tool limitation</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h5">
            <a href="#port-limitation" class="nav-link">Port limitation</a>
        </li>
    
        <li class="nav-item toc-entry toc-h5">
            <a href="#initialisation-limitation" class="nav-link">Initialisation limitation</a>
        </li>
    
            </ul>
        </li>
    
            </ul>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#debounce" class="nav-link">Debounce</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#reset-input" class="nav-link">Reset Input</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#pseudo-random-number-generator" class="nav-link">Pseudo Random Number Generator</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#background" class="nav-link">Background</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#generics" class="nav-link">Generics</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="blinker">
<h2>Blinker<a class="headerlink" href="#blinker" title="Permalink to this headline">¶</a></h2>
<p>Many time you want to implement a Led blinking at a given event. The problem is that the available signal is either tool long or (mostly) too short to be seen for a led. Therefore this bloc was created to let a led blink on an event of a signal.</p>
<div class="section" id="settings">
<h3>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Set your <strong>clockFrequency</strong> , according to that a blink of 500ms will be calculated.</p></li>
<li><p>Choose your <strong>mode</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span> <span class="pre">0</span></code>: rising edge reaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span> <span class="pre">1</span></code>: falling edge reaction</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Mode</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">(</span><span class="n">reactive</span> <span class="n">on</span> <span class="n">rising</span> <span class="n">edge</span><span class="p">)</span>
             <span class="n">___________________________________________</span>
 <span class="nb">input</span>  <span class="n">____</span><span class="o">/</span>
             <span class="n">___________________</span>
 <span class="n">output</span> <span class="n">____</span><span class="o">/</span>                   \<span class="n">_______________________</span>
 <span class="n">time</span>   <span class="mi">0</span><span class="n">s</span>                    <span class="mf">0.5</span><span class="n">s</span>                    <span class="mi">1</span><span class="n">s</span>

             <span class="n">_</span>
 <span class="nb">input</span>  <span class="n">____</span><span class="o">/</span> \<span class="n">_________________________________________</span>
             <span class="n">___________________</span>
 <span class="n">output</span> <span class="n">____</span><span class="o">/</span>                   \<span class="n">_______________________</span>
 <span class="n">time</span>   <span class="mi">0</span><span class="n">s</span>                    <span class="mf">0.5</span><span class="n">s</span>                    <span class="mi">1</span><span class="n">s</span>

<span class="n">Mode</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">(</span><span class="n">reactive</span> <span class="n">on</span> <span class="n">falling</span> <span class="n">edge</span><span class="p">)</span>
        <span class="n">_____</span>
 <span class="nb">input</span>       \<span class="n">__________________________________________</span>
               <span class="n">___________________</span>
 <span class="n">output</span> <span class="n">______</span><span class="o">/</span>                   \<span class="n">_____________________</span>
 <span class="n">time</span>   <span class="mi">0</span><span class="n">s</span>                    <span class="mf">0.5</span><span class="n">s</span>                    <span class="mi">1</span><span class="n">s</span>

             <span class="n">_</span>
 <span class="nb">input</span>  <span class="n">____</span><span class="o">/</span> \<span class="n">_________________________________________</span>
                <span class="n">___________________</span>
 <span class="n">output</span> <span class="n">______</span> <span class="o">/</span>                   \<span class="n">____________________</span>
 <span class="n">time</span>   <span class="mi">0</span><span class="n">s</span>                    <span class="mf">0.5</span><span class="n">s</span>                    <span class="mi">1</span><span class="n">s</span>
</pre></div>
</div>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/tree/master/scripts/vhdl/blink">config repo blink</a></p>
</div>
</div>
</div>
<div class="section" id="bram">
<h2>BRAM<a class="headerlink" href="#bram" title="Permalink to this headline">¶</a></h2>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/tree/master/scripts/vhdl/bram">config repo bram</a></p>
</div>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/bram.svg"><img alt="../../_images/bram.svg" src="../../_images/bram.svg" width="200px" /></a>
<p class="caption"><span class="caption-text">BRAM</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>To generate RAM and ROM using the BRAM’s available in the FPGA, several methods can be used.</p>
<blockquote>
<div><ul class="simple">
<li><p>For Xilinx you can use the CoreGen Program and for Actel the Libero IDE</p></li>
<li><p>Write VHDL code which the synthesis tool can understand</p></li>
</ul>
</div></blockquote>
<p>The advantage of the second method is that it’s target independent, but however it depends on the functionalities of the Synthesis tool.</p>
<div class="section" id="definition">
<h3>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rom-definition">
<h4>ROM Definition<a class="headerlink" href="#rom-definition" title="Permalink to this headline">¶</a></h4>
<p><strong>Single Port ROM with VHDL initialisation</strong></p>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/blob/master/scripts/vhdl/bram/rom.vhd">config repo rom.vhd</a></p>
</div>
</div>
<div class="section" id="ram-definition">
<h4>RAM Definition<a class="headerlink" href="#ram-definition" title="Permalink to this headline">¶</a></h4>
<p><strong>Dual-Port RAM with synchronous Read (Read Through) with no initialisation</strong></p>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/blob/master/scripts/vhdl/bram/dp_ram_1.vhd">config repo dp_ram_1.vhd</a></p>
</div>
<p><strong>Generic Dual-Port RAM (Write First) with two clocks, enables and write enables and initialisation with a binary file</strong></p>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/blob/master/scripts/vhdl/bram/dp_ram_2.vhd">config repo dp_ram_2.vhd</a></p>
</div>
</div>
</div>
<div class="section" id="initialisation">
<h3>Initialisation<a class="headerlink" href="#initialisation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="mif-file">
<h4>MIF-File<a class="headerlink" href="#mif-file" title="Permalink to this headline">¶</a></h4>
<p>An ASCII text file (with the extension <code class="docutils literal notranslate"><span class="pre">.mif</span></code>) that specifies the initial content of a memory block (CAM, RAM, or ROM), that is, the initial values for each address.</p>
<p>A MIF contains the initial values for each address in the memory. A separate file is required for each memory block. In a MIF, you are also required to specify the memory depth and width values. In addition, you can specify the radixes used to display and interpret addresses and data values.</p>
</div>
<div class="section" id="hex-file">
<h4>HEX-File<a class="headerlink" href="#hex-file" title="Permalink to this headline">¶</a></h4>
<p>Intel HEX is a file format for conveying binary information for applications like programming microcontrollers, EPROMs, and other kinds of chips. It is one of the oldest file formats available for this purpose, having been in use since the 1970s.</p>
<div class="section" id="format">
<h5>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h5>
<p><strong>Start code</strong></p>
<p>The Start code exist only once per line at it’s beginning. The Start code is <code class="docutils literal notranslate"><span class="pre">:</span></code></p>
<p><strong>Byte count</strong></p>
<p>The Byte count indicates the number n of Raw Data bytes there are in the Data field.</p>
<p><strong>Address</strong></p>
<p>16bit Address of the Data. If more Address bits are needed see Record Type <code class="docutils literal notranslate"><span class="pre">04</span></code>.</p>
<p><strong>Record type</strong></p>
<p>There are six possible Record type:</p>
<ul>
<li><p><strong>00</strong>: data record, contains data and 16-bit address.</p></li>
<li><p><strong>01</strong>: End Of File record. Must occur exactly once per file in the last line of the file. The byte count is 00 and the data field is empty. Usually the address field is also 0000, in which case the complete line is <code class="docutils literal notranslate"><span class="pre">:00000001FF</span></code>. Originally the End Of File record could contain a start address for the program being loaded, e.g. :00AB2F0125 would cause a jump to address AB2F.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="mi">00000001</span><span class="n">FF</span>

<span class="ow">or</span>

<span class="p">:</span><span class="mi">020000010000</span><span class="n">FD</span>
</pre></div>
</div>
</li>
<li><p><strong>02</strong>: Extended Segment Address Record, segment-base address (two hex digit pairs in big endian order). Used when 16 bits are not enough, identical to 80x86 real mode addressing. The address specified by the data field of the most recent 02 record is multiplied by 16 (shifted 4 bits left) and added to the subsequent 00 record addresses. This allows addressing of up to a megabyte of address space. The address field of this record has to be 0000, the byte count is 02 (the segment is 16-bit). The least significant hex digit of the segment address is always 0.</p></li>
<li><p><strong>03</strong>: Start Segment Address Record. For 80x86 processors, it specifies the initial content of the CS:IP registers. The address field is 0000, the byte count is 04, the first two bytes are the CS value, the latter two are the IP value.</p></li>
<li><p><strong>04</strong>: Extended Linear Address Record, allowing for fully 32 bit addressing (up to 4GiB). The address field is 0000, the byte count is 02. The two data bytes (two hex digit pairs in big endian order) represent the upper 16 bits of the 32 bit address for all subsequent 00 type records until the next 04 type record comes. If there is not a 04 type record, the upper 16 bits default to 0000. To get the absolute address for subsequent 00 type records, the address specified by the data field of the most recent 04 record is added to the 00 record addresses.</p></li>
<li><p><strong>05</strong>: Start Linear Address Record. The address field is 0000, the byte count is 04. The 4 data bytes represent the 32-bit value loaded into the EIP register of the 80386 and higher CPU.</p></li>
</ul>
<p><strong>Data</strong></p>
<p>Raw Data of n bytes (n = Bytecount) at the given address in Hexadecimal format.</p>
<p><strong>Checksum</strong></p>
<p>The Checksum is two hex digits - the least significant byte of the two’s complement of the sum of the values of all fields except fields 1 and 6 (Start code “:” byte and two hex digits of the Checksum).
It is calculated by adding together the hex-encoded bytes (hex digit pairs), then leaving only the least significant byte of the result, and making a 2’s complement (either by subtracting the byte from 0x100, or inverting it by XOR-ing with 0xFF and adding 0x01).</p>
</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span> <span class="mi">10</span> <span class="mi">0100</span> <span class="mi">00</span> <span class="mi">214601360121470136007</span><span class="n">EFE09D21901</span> <span class="mi">40</span>
<span class="p">:</span> <span class="mi">10</span> <span class="mi">0110</span> <span class="mi">00</span> <span class="mi">2146017</span><span class="n">EB7C20001FF5F160021480119</span> <span class="mi">88</span>
<span class="p">:</span> <span class="mi">10</span> <span class="mi">0120</span> <span class="mi">00</span> <span class="mf">194E79234623965778239</span><span class="n">EDA3F01B2CA</span> <span class="n">A7</span>
<span class="p">:</span> <span class="mi">10</span> <span class="mi">0130</span> <span class="mi">00</span> <span class="mi">3</span><span class="n">F0156702B5E712B722B732146013421</span> <span class="n">C7</span>
<span class="p">:</span> <span class="mi">00</span> <span class="mi">0000</span> <span class="mi">01</span> <span class="n">FF</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="binary-file">
<h4>Binary-File<a class="headerlink" href="#binary-file" title="Permalink to this headline">¶</a></h4>
<p>An ASCII text file (with the extension <code class="docutils literal notranslate"><span class="pre">.bin</span></code>) that specifies the initial content of a memory block (CAM, RAM, or ROM), that is, the initial values for each address.
This is the initialisation file used in the BRAM-VHDL examples. The file location has to be given in the generic called <code class="docutils literal notranslate"><span class="pre">initFile</span></code>.
The file is witten in ASCII-binary format and one line has to be one line of the BRAM with the exact number of databits. Also each BRAM address has to be initialised in this file.</p>
<p>An example of an 16 databit and 3 addressbit RAM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0000000000000000</span>
<span class="mi">0000000000000001</span>
<span class="mi">0000000000000010</span>
<span class="mi">0000000000000011</span>
<span class="mi">0000000000000100</span>
<span class="mi">0000000000000101</span>
<span class="mi">0000000000000110</span>
<span class="mi">0000000000000111</span>
</pre></div>
</div>
</div>
<div class="section" id="in-vhdl">
<h4>In VHDL<a class="headerlink" href="#in-vhdl" title="Permalink to this headline">¶</a></h4>
<p>In order to initialise the BRAM you can also edit the VHDL code directly and initialise your Memory signal.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>  <span class="k">signal</span> <span class="n">ROM</span> <span class="o">:</span> <span class="n">rom_type</span> <span class="o">:=</span> <span class="p">(</span><span class="mh">X&quot;0200A&quot;</span><span class="p">,</span><span class="mh">X&quot;00300&quot;</span><span class="p">,</span><span class="mh">X&quot;08101&quot;</span><span class="p">,</span><span class="mh">X&quot;04000&quot;</span><span class="p">,</span><span class="mh">X&quot;08601&quot;</span><span class="p">,</span><span class="mh">X&quot;0233A&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;00300&quot;</span><span class="p">,</span><span class="mh">X&quot;08602&quot;</span><span class="p">,</span><span class="mh">X&quot;02310&quot;</span><span class="p">,</span><span class="mh">X&quot;0203B&quot;</span><span class="p">,</span><span class="mh">X&quot;08300&quot;</span><span class="p">,</span><span class="mh">X&quot;04002&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;08201&quot;</span><span class="p">,</span><span class="mh">X&quot;00500&quot;</span><span class="p">,</span><span class="mh">X&quot;04001&quot;</span><span class="p">,</span><span class="mh">X&quot;02500&quot;</span><span class="p">,</span><span class="mh">X&quot;00340&quot;</span><span class="p">,</span><span class="mh">X&quot;00241&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;04002&quot;</span><span class="p">,</span><span class="mh">X&quot;08300&quot;</span><span class="p">,</span><span class="mh">X&quot;08201&quot;</span><span class="p">,</span><span class="mh">X&quot;00500&quot;</span><span class="p">,</span><span class="mh">X&quot;08101&quot;</span><span class="p">,</span><span class="mh">X&quot;00602&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;04003&quot;</span><span class="p">,</span><span class="mh">X&quot;0241E&quot;</span><span class="p">,</span><span class="mh">X&quot;00301&quot;</span><span class="p">,</span><span class="mh">X&quot;00102&quot;</span><span class="p">,</span><span class="mh">X&quot;02122&quot;</span><span class="p">,</span><span class="mh">X&quot;02021&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;00301&quot;</span><span class="p">,</span><span class="mh">X&quot;00102&quot;</span><span class="p">,</span><span class="mh">X&quot;02222&quot;</span><span class="p">,</span><span class="mh">X&quot;04001&quot;</span><span class="p">,</span><span class="mh">X&quot;00342&quot;</span><span class="p">,</span><span class="mh">X&quot;0232B&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;00900&quot;</span><span class="p">,</span><span class="mh">X&quot;00302&quot;</span><span class="p">,</span><span class="mh">X&quot;00102&quot;</span><span class="p">,</span><span class="mh">X&quot;04002&quot;</span><span class="p">,</span><span class="mh">X&quot;00900&quot;</span><span class="p">,</span><span class="mh">X&quot;08201&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;02023&quot;</span><span class="p">,</span><span class="mh">X&quot;00303&quot;</span><span class="p">,</span><span class="mh">X&quot;02433&quot;</span><span class="p">,</span><span class="mh">X&quot;00301&quot;</span><span class="p">,</span><span class="mh">X&quot;04004&quot;</span><span class="p">,</span><span class="mh">X&quot;00301&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;00102&quot;</span><span class="p">,</span><span class="mh">X&quot;02137&quot;</span><span class="p">,</span><span class="mh">X&quot;02036&quot;</span><span class="p">,</span><span class="mh">X&quot;00301&quot;</span><span class="p">,</span><span class="mh">X&quot;00102&quot;</span><span class="p">,</span><span class="mh">X&quot;02237&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;04004&quot;</span><span class="p">,</span><span class="mh">X&quot;00304&quot;</span><span class="p">,</span><span class="mh">X&quot;04040&quot;</span><span class="p">,</span><span class="mh">X&quot;02500&quot;</span><span class="p">,</span><span class="mh">X&quot;02500&quot;</span><span class="p">,</span><span class="mh">X&quot;02500&quot;</span><span class="p">,</span>
                            <span class="mh">X&quot;0030D&quot;</span><span class="p">,</span><span class="mh">X&quot;02341&quot;</span><span class="p">,</span><span class="mh">X&quot;08201&quot;</span><span class="p">,</span><span class="mh">X&quot;0400D&quot;</span><span class="p">);</span>


<span class="n">Restrictions</span>
</pre></div>
</div>
<p>There are cetain restriction if you write BRAM’s in VHDL</p>
</div>
<div class="section" id="syntesis-tool-limitation">
<h4>Syntesis Tool limitation<a class="headerlink" href="#syntesis-tool-limitation" title="Permalink to this headline">¶</a></h4>
<p>The VHDL Code for creating BRAM is read and understood by the synthesis tool. The mentioned code was tested in Xilinx XST Syntesis Tool. It has to be verified for other Synthesis tools like Simplify or Leonardo. The following limitaions are due the use of Xilinx XST.</p>
<div class="section" id="port-limitation">
<h5>Port limitation<a class="headerlink" href="#port-limitation" title="Permalink to this headline">¶</a></h5>
<p>The BRAM’s defined in VHDL can have multiple Read ports, but only ONE Write port.</p>
</div>
<div class="section" id="initialisation-limitation">
<h5>Initialisation limitation<a class="headerlink" href="#initialisation-limitation" title="Permalink to this headline">¶</a></h5>
<p>The BRAM can <strong>only</strong> with the described Binary file format be initialised. The Synthesis tools doesn’t support read and parsing files. Therefore a hex or mif file format can not be used.</p>
</div>
</div>
</div>
</div>
<div class="section" id="debounce">
<h2>Debounce<a class="headerlink" href="#debounce" title="Permalink to this headline">¶</a></h2>
<p>Each button can bounce while pushing or releasing. This can’t completely eliminated. but to avoid button bouncing. The following two thing can be done.</p>
<ul class="simple">
<li><p>Buy high quality buttons</p></li>
<li><p>Implement a button debouncing</p></li>
</ul>
<p>Settings
First the max bounce time should be measured and according to that value and your used clock, the counterBitNb can be choosen accordingly.
The following implementation has two different modes. Mode 0 is reactive on rising edge and mode 1 is reactive on falling edge.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Mode</span> <span class="mi">0</span>
             <span class="n">_</span>   <span class="n">_</span>   <span class="n">____________________</span>   <span class="n">_</span>   <span class="n">_</span>
 <span class="nb">input</span>  <span class="n">____</span><span class="o">/</span> \ <span class="o">/</span> \ <span class="o">/</span>                    \<span class="n">_</span><span class="o">/</span> \ <span class="o">/</span> \<span class="n">______</span>
             <span class="n">_________________________________________</span>
 <span class="n">output</span> <span class="n">____</span><span class="o">/</span>                                         \<span class="n">_</span>

<span class="n">Mode</span> <span class="mi">1</span>
             <span class="n">_</span>   <span class="n">_</span>   <span class="n">____________________</span>   <span class="n">_</span>   <span class="n">_</span>
 <span class="nb">input</span>  <span class="n">____</span><span class="o">/</span> \ <span class="o">/</span> \ <span class="o">/</span>                    \<span class="n">_</span><span class="o">/</span> \ <span class="o">/</span> \<span class="n">______</span>
                          <span class="n">_______________</span>
 <span class="n">output</span> <span class="n">_________________</span><span class="o">/</span>               \<span class="n">______________</span>
</pre></div>
</div>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/tree/master/scripts/vhdl/debounce">config repo debounce</a></p>
</div>
</div>
<div class="section" id="reset-input">
<h2>Reset Input<a class="headerlink" href="#reset-input" title="Permalink to this headline">¶</a></h2>
<p>For having a stable system first you need a proper reset. Just using an input as reset isn’t enough. Here’s how to poperly synchronize your reset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>--pad_rst----+----------+----------+
          +--+--+    +--+--+    +--+--+    +-.
--&#39;1&#39;-----|D   Q|----|D   Q|----|D   Q|----|  &gt;O-----rst
          |     |    |     |    |     |    +-´
       +--|&gt;    | +--|&gt;    | +--|&gt;    |
       |  +-----+ |  +-----+ |  +-----+
--clk--+----------+----------+
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">blink</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">LIBRARY</span> <span class="nn">ieee</span><span class="p">;</span>
  <span class="k">USE</span> <span class="nn">ieee.std_logic_1164.</span><span class="k">all</span><span class="p">;</span>
  <span class="k">USE</span> <span class="nn">ieee.numeric_std.</span><span class="k">all</span><span class="p">;</span>

<span class="k">ENTITY</span> <span class="nc">rst_synchronizer</span> <span class="k">IS</span>
   <span class="k">PORT</span><span class="p">(</span> <span class="n">pad_rst_n</span> <span class="o">:</span> <span class="k">IN</span>     <span class="kt">std_logic</span><span class="p">;</span>
         <span class="n">clock</span>     <span class="o">:</span> <span class="k">IN</span>     <span class="kt">std_ulogic</span><span class="p">;</span>
         <span class="n">reset</span>     <span class="o">:</span> <span class="k">OUT</span>    <span class="kt">std_ulogic</span>
   <span class="p">);</span>
<span class="k">END</span> <span class="nc">rst_synchronizer</span> <span class="p">;</span>

<span class="k">ARCHITECTURE</span> <span class="nc">rtl</span> <span class="k">OF</span> <span class="nc">rst_synchronizer</span> <span class="k">IS</span>

  <span class="k">signal</span> <span class="n">lvec_rst_n</span> <span class="o">:</span> <span class="kt">std_ulogic_vector</span><span class="p">(</span><span class="mi">2</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">BEGIN</span>

  <span class="k">process</span><span class="p">(</span><span class="n">pad_rst_n</span> <span class="p">,</span> <span class="n">clock</span><span class="p">)</span>
  <span class="k">begin</span>
    <span class="k">if</span> <span class="n">pad_rst_n</span> <span class="o">=</span> <span class="sc">&#39;1&#39;</span> <span class="k">then</span>
      <span class="n">lvec_rst_n</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="k">others</span> <span class="o">=&gt;</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
    <span class="k">elsif</span> <span class="n">rising_edge</span><span class="p">(</span><span class="n">clock</span><span class="p">)</span> <span class="k">then</span>
      <span class="n">lvec_rst_n</span> <span class="o">&lt;=</span> <span class="n">lvec_rst_n</span><span class="p">(</span><span class="mi">1</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="sc">&#39;1&#39;</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
  <span class="k">end</span> <span class="k">process</span><span class="p">;</span>
  <span class="n">rst</span> <span class="o">&lt;=</span> <span class="k">not</span> <span class="n">lvec_rst_n</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="k">END</span> <span class="k">ARCHITECTURE</span> <span class="nc">rtl</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pseudo-random-number-generator">
<h2>Pseudo Random Number Generator<a class="headerlink" href="#pseudo-random-number-generator" title="Permalink to this headline">¶</a></h2>
<div class="alert alert-info">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/tschinz/config/tree/master/scripts/vhdl/prng">config repo blink</a></p>
</div>
<p>This VHDL module uses 2 Linear Feedback Shift Registers (LFSR) with polynomials for maximal sequence length, one of which is scalable to output word size (<code class="docutils literal notranslate"><span class="pre">4bit</span></code> - <code class="docutils literal notranslate"><span class="pre">24bit</span></code>) and one to operate as a non-uniform duty cycle clock. The module gives the user 4 options for output distribution types, Gaussian unimodal, bimodal, uniform, and non-uniform distributions. These distributions are created by altering a scalable LFSR output by clocking the output irregularly with a non-uniform clock, shifting scaled outputs into a buffer-adder-tree to effectively use the central limit theorem to create a normal distribution, and a feedback loop to further shape the distributions. Sample histograms are included in the figures following.
The prng.vhd module is verified in a test bench by writing out the pseudo-random values to a file. This data can be entered into one’s favorite statistical analysis software package for verification.</p>
<div class="section" id="background">
<h3>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h3>
<p>The LFSR is a shift register of arbitrary length that takes its input based off a linear function derived from the previous state. This function is chosen to provide a maximally long sequence. As the output-width is scaled, a different LFSR is built with a polynomial to provide maximal length. The polynomials used are commented in the VHDL module.</p>
</div>
<div class="section" id="generics">
<h3>Generics<a class="headerlink" href="#generics" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Generic</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Range</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">g_W</span></code></p></td>
<td><p>Integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">28</span></code> - <code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td><p>Number of output vector bits</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">g_V</span></code></p></td>
<td><p>Integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">24</span></code> - <code class="docutils literal notranslate"><span class="pre">18</span></code></p></td>
<td><p>Non uniforming clocking bits</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">g_G_TYPE</span></code></p></td>
<td><p>Integer</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">0</span></code> = uniform</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">1</span></code> = bimodal</div>
</div>
</td>
<td><p>Gaussion Distribution Type for <code class="docutils literal notranslate"><span class="pre">o_g_noise</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">g_U_TYPE</span></code></p></td>
<td><p>Integer</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">0</span></code> = uniform</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">1</span></code> = ave-uniform</div>
</div>
</td>
<td><p>Uniform Distribution Type for <code class="docutils literal notranslate"><span class="pre">o_u_noise</span></code></p></td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col style="width: 30%" />
<col style="width: 25%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Signal</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">iCLK_clk</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>input clock signal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">iGRS_reset_n</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>input reset signal</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i_enable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>enable prn generation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">o_g_noise</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[g_W-1:0]</span></code></p></td>
<td><p>gaussian distibution output</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">o_u_noise</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[g_W-1:0]</span></code></p></td>
<td><p>uniform distribution output</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
              
          </main>
          

      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2004-2020, tschinz.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>