

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Subsonic &#8212; Zawiki</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/copy_button.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/default.js"></script>
    <script src="../../../_static/wavedrom.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Systemd" href="systemd.html" />
    <link rel="prev" title="Shairport" href="shairport.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../../index.html">
      <img src="../../../_static/logo.svg" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../../index.html">OS</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../tools/index.html">Tools</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../programming/index.html">Programming</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../hw/index.html">Hardware</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../writing/index.html">Writing</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../multimedia/index.html">Multimedia</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../security/index.html">Security</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../about/index.html">About</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://github.com/tschinz/config">Config repo<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Don't panic, search" aria-label="Don't panic, search" autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/tschinz/zawiki" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/tschinz" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">



<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
        
          

              <li class="active">
                  <a href="../index.html">Linux</a>
                  <ul>
                  
                      <li class="">
                          <a href="../commandline/index.html">Commandline</a>
                      </li>
                  
                      <li class="">
                          <a href="../scripts/index.html">Scripts</a>
                      </li>
                  
                      <li class="active">
                          <a href="index.html">Tools</a>
                      </li>
                  
                      <li class="">
                          <a href="../ubuntu/index.html">Ubuntu</a>
                      </li>
                  
                      <li class="">
                          <a href="../rpi/index.html">Raspberry Pi</a>
                      </li>
                  
                      <li class="">
                          <a href="../filesystem/index.html">Filesystem</a>
                      </li>
                  
                  </ul>
              </li>
          
        
          
              <li class="">
                  <a href="../../mac/index.html">Mac</a>
              </li>
          
        
          
              <li class="">
                  <a href="../../win/index.html">Windows</a>
              </li>
          
        
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#installation" class="nav-link">Installation</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#install-java" class="nav-link">Install Java</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#install-madsonic" class="nav-link">Install Madsonic</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#configuration-and-service" class="nav-link">Configuration and Service</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#add-transcoding" class="nav-link">Add Transcoding</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#if-somethings-goes-wrong" class="nav-link">If somethings goes wrong</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#jukebox" class="nav-link">Jukebox</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#selecting-the-soundcard" class="nav-link">Selecting the Soundcard</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/tschinz/zawiki/edit/master/source/os/linux/tools/subsonic.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="subsonic">
<h1>Subsonic<a class="headerlink" href="#subsonic" title="Permalink to this headline">¶</a></h1>
<p>(Sub)Madsonic is a free, web-based media streamer, providing ubiquitous access to your music. Use it to share your music with friends, or to listen to your own music while at work. You can stream to multiple players simultaneously, for instance to one player in your kitchen and another in your living room.</p>
<p>(Sub)Madsonic is designed to handle very large music collections (hundreds of gigabytes). Although optimized for MP3 streaming, it works for any audio or video format that can stream over HTTP, for instance AAC and OGG. By using transcoder plug-ins, (Sub)Madsonic supports on-the-fly conversion and streaming of virtually any audio format, including WMA, FLAC, APE, Musepack, WavPack and Shorten.</p>
<p>If you have constrained bandwidth, you may set an upper limit for the bitrate of the music streams. (Sub)Madsonic will then automatically resample the music to a suitable bitrate.</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../../_images/madsonic.png"><img alt="Madsonic" src="../../../_images/madsonic.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">Madsonic Webinterface</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>For installation instructions see also <a class="reference external" href="https://beta.madsonic.org/pages/help.jsp">here</a>. My madsonic configuration can be see in the config repo: <a class="reference external" href="https://github.com/tschinz/config/tree/master/config/madsonic">madsonic config</a></p>
<div class="section" id="install-java">
<h3>Install Java<a class="headerlink" href="#install-java" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install openjdk-8-jre
</pre></div>
</div>
</div>
<div class="section" id="install-madsonic">
<h3>Install Madsonic<a class="headerlink" href="#install-madsonic" title="Permalink to this headline">¶</a></h3>
<p>There are 2 good Subsonic versions. The official subsonic version, very stable, fast and reliable and the MadSonic Mod from MadEvil. It has several improvements and feature additions.</p>
<ul class="simple">
<li><p>Download the <a class="reference external" href="http://www.subsonic.org/pages/download.jsp">Subsonic .deb</a> package and install it:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dpkg -i subsonic-x.x.deb
</pre></div>
</div>
<ul class="simple">
<li><p>Download the <a class="reference external" href="http://beta.madsonic.org/pages/download.jsp">MadSonic .deb</a> package and install it:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dpkg -i Madsonic-x.x.xxxx.deb
</pre></div>
</div>
<ul class="simple">
<li><p>Test the system on a local browser with the address <a class="reference external" href="http://localhost:4040">http://localhost:4040</a></p></li>
</ul>
</div>
</div>
<div class="section" id="configuration-and-service">
<h2>Configuration and Service<a class="headerlink" href="#configuration-and-service" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Log into change the admin password first</p></li>
<li><p>Recommended to change advanced settings as well, like Java Memory, Port Number, Startup Settings</p>
<ul class="simple">
<li><p>Edit the SUBSONIC_ARGS variable in <code class="docutils literal notranslate"><span class="pre">/etc/default/subsonic</span></code> or <code class="docutils literal notranslate"><span class="pre">/etc/default/madsonic</span></code></p></li>
</ul>
</li>
<li><p>Restart the service</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo service subsonic restart
<span class="c1"># or</span>
sudo service madsonic restart
</pre></div>
</div>
</li>
</ul>
<div class="section" id="add-transcoding">
<h3>Add Transcoding<a class="headerlink" href="#add-transcoding" title="Permalink to this headline">¶</a></h3>
<p>In order that Subsonic can use the powerful <a class="reference external" href="https://beta.madsonic.org/pages/transcoding.jsp">transcoding</a> feature you need to install some third-party transcoders:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install lame flac faad vorbis-tools
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="if-somethings-goes-wrong">
<h3>If somethings goes wrong<a class="headerlink" href="#if-somethings-goes-wrong" title="Permalink to this headline">¶</a></h3>
<p>Check the logs in <code class="docutils literal notranslate"><span class="pre">/var/madsonic</span></code>.</p>
</div>
</div>
<div class="section" id="jukebox">
<h2>Jukebox<a class="headerlink" href="#jukebox" title="Permalink to this headline">¶</a></h2>
<p>In order to get the Jukebox to work, the soundcard needs to be set up first.</p>
<p>The user that is running (Sub)Madsonic needs to have access to the soundcard. For Ubuntu this means adding that user to the <code class="docutils literal notranslate"><span class="pre">audio</span></code> group in <code class="docutils literal notranslate"><span class="pre">/etc/group</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>useradd -G audio username
</pre></div>
</div>
<div class="section" id="selecting-the-soundcard">
<h3>Selecting the Soundcard<a class="headerlink" href="#selecting-the-soundcard" title="Permalink to this headline">¶</a></h3>
<p>First you need to find out what your soundcards are named in the sound library used in Java.</p>
<p>Create the following file</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">audioDevList.java</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.sound.sampled.*</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">audioDevList</span><span class="p">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]</span><span class="p">){</span>

    <span class="c1">// Get and display a list of available mixers.</span>

    <span class="n">Mixer</span><span class="p">.</span><span class="na">Info</span><span class="o">[]</span> <span class="n">mixerInfo</span> <span class="o">=</span> <span class="n">AudioSystem</span><span class="p">.</span><span class="na">getMixerInfo</span><span class="p">();</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Available mixers:&quot;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">cnt</span> <span class="o">&lt;</span> <span class="n">mixerInfo</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="n">cnt</span><span class="o">++</span><span class="p">){</span>
      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mixerInfo</span><span class="o">[</span><span class="n">cnt</span><span class="o">]</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>And then run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>javac audioDevList.java
java audioDevList
</pre></div>
</div>
<p>If you get an error about javac not found, you need to install the JDK (e.g. openjdk-8-jdk).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install openjdk-8-jdk
</pre></div>
</div>
<p>Here is a sample output of the script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Available</span> <span class="n">mixers</span><span class="p">:</span>
<span class="n">NVidia</span> <span class="p">[</span><span class="n">plughw</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">NVidia</span> <span class="p">[</span><span class="n">plughw</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
<span class="n">NVidia</span> <span class="p">[</span><span class="n">plughw</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="n">NVidia</span> <span class="p">[</span><span class="n">plughw</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">Intel</span> <span class="p">[</span><span class="n">plughw</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">CX8801</span> <span class="p">[</span><span class="n">plughw</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Port</span> <span class="n">NVidia</span> <span class="p">[</span><span class="n">hw</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Port</span> <span class="n">Intel</span> <span class="p">[</span><span class="n">hw</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Port</span> <span class="n">CX8801</span> <span class="p">[</span><span class="n">hw</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>&lt;/code&gt;
Linux / Mac : Modify your <code class="docutils literal notranslate"><span class="pre">/usr/bin/subsonic/subsonic_run.sh</span></code> (for Ubuntu package install) and add the following line. Note the single quotes and the hash mark <code class="docutils literal notranslate"><span class="pre">#</span></code> before the sound card name. Those are required.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;-Djavax.sound.sampled.SourceDataLine=#PCH [plughw:0,0]&#39;</span> <span class="se">\</span>
</pre></div>
</div>
<p>Restart the subsonic service</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo service subsonic restart
<span class="c1"># or</span>
sudo service madsonic restart
</pre></div>
</div>
<p>Once Music is played in jukebox mode the audio is not available anymore to other programs. To cut this restart sub/madsonic as above shown.</p>
</div>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
              
          </main>
          

      </div>
    </div>

    <script src="../../../_static/js/index.js"></script>
    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-20699788-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2004-2020, tschinz.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>