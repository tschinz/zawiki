

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>VPN Virtual Private Network &#8212; Zawiki</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/copy_button.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/default.js"></script>
    <script src="../../../_static/wavedrom.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Ubuntu" href="../ubuntu/index.html" />
    <link rel="prev" title="VNC Remote Control" href="vnc.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../../index.html">
      <img src="../../../_static/logo.svg" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../../index.html">OS</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../tools/index.html">Tools</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../coding/index.html">Coding</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../writing/index.html">Writing</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../multimedia/index.html">Multimedia</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../security/index.html">Security</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../about/index.html">About</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://github.com/tschinz/config">Config repo<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Don't panic, search" aria-label="Don't panic, search" autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/tschinz/zawiki" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/tschinz" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">



<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
        
          

              <li class="active">
                  <a href="../index.html">Linux</a>
                  <ul>
                  
                      <li class="">
                          <a href="../commandline/index.html">Commandline</a>
                      </li>
                  
                      <li class="">
                          <a href="../scripts/index.html">Scripts</a>
                      </li>
                  
                      <li class="active">
                          <a href="index.html">Tools</a>
                      </li>
                  
                      <li class="">
                          <a href="../ubuntu/index.html">Ubuntu</a>
                      </li>
                  
                      <li class="">
                          <a href="../rpi/index.html">Raspberry Pi</a>
                      </li>
                  
                      <li class="">
                          <a href="../filesystem/index.html">Filesystem</a>
                      </li>
                  
                  </ul>
              </li>
          
        
          
              <li class="">
                  <a href="../../mac/index.html">Mac</a>
              </li>
          
        
          
              <li class="">
                  <a href="../../win/index.html">Windows</a>
              </li>
          
        
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#vpn-server-outgoing-linux" class="nav-link">VPN Server Outgoing (Linux)</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#install" class="nav-link">Install</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#config" class="nav-link">Config</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#start-vpn" class="nav-link">Start VPN</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#enable-forwarding" class="nav-link">Enable Forwarding</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#vpn-client-incoming-win-7" class="nav-link">VPN client Incoming (Win 7)</a>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/tschinz/zawiki/edit/master/source/os/linux/tools/vpn.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="vpn-virtual-private-network">
<h1>VPN Virtual Private Network<a class="headerlink" href="#vpn-virtual-private-network" title="Permalink to this headline">¶</a></h1>
<p>A virtual private network (VPN) extends a private network across a public network, such as the Internet. It enables a computer to send and receive data across shared or public networks as if it were directly connected to the private network, while benefiting from the functionality, security and management policies of the private network. This is done by establishing a virtual point-to-point connection through the use of dedicated connections, encryption, or a combination of the two.</p>
<p>There exist many different VPN protocols such as PPTP, OpenVPN, L2TP, SSTP.
In this section We will set-up and connect a VPN connection using the PPTP protocol.</p>
<div class="section" id="vpn-server-outgoing-linux">
<h2>VPN Server Outgoing (Linux)<a class="headerlink" href="#vpn-server-outgoing-linux" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install">
<h3>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install pptpd
</pre></div>
</div>
</div>
<div class="section" id="config">
<h3>Config<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<p>Add the following lines in your <code class="docutils literal notranslate"><span class="pre">etc/pptpd.conf</span></code></p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">/etc/pptpd.conf</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>localip  <span class="m">192</span>.168.1.5         <span class="c1"># IP of your server hosting VPN</span>
remoteip <span class="m">192</span>.168.1.234-1.238 <span class="c1"># Range of IP to use for connected machines</span>
</pre></div>
</div>
</div>
<p>Add the following lines to configure <code class="docutils literal notranslate"><span class="pre">pptpd</span></code> in <code class="docutils literal notranslate"><span class="pre">/etc/ppp/pptpd-options</span></code></p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">/etc/ppp/pptpd-options</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ms-dns <span class="m">192</span>.168.1.1        <span class="c1"># IP of your DNS Server</span>
nobsdcomp
noipx
mtu <span class="m">1490</span>
mru <span class="m">1490</span>
</pre></div>
</div>
</div>
<p>add users to the <code class="docutils literal notranslate"><span class="pre">/etc/ppp/chap-secrets</span></code> file, you can add as many users as you like</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">/etc/ppp/chap-secrets</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>username * users-password *
</pre></div>
</div>
</div>
</div>
<div class="section" id="start-vpn">
<h3>Start VPN<a class="headerlink" href="#start-vpn" title="Permalink to this headline">¶</a></h3>
<p>Start / Restart the VPN Deamon to activate the config</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo /etc/init.d/pptpd restart
</pre></div>
</div>
<div class="alert alert-primary">
<p class="admonition-title">Important</p>
<p>Note that the connection can only access the server itself and not beyond it. Enable forwarding to avoid this.</p>
</div>
</div>
<div class="section" id="enable-forwarding">
<h3>Enable Forwarding<a class="headerlink" href="#enable-forwarding" title="Permalink to this headline">¶</a></h3>
<p>This step is optional. It is needed to give the connected machine access beyond the server.</p>
<p>By enable forwarding  the entire network will be available to the connected machine not just the VPN server itself.</p>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">/etc/sysctl.conf</span></code> and change to following parameter from <code class="docutils literal notranslate"><span class="pre">0</span></code> to to <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">/etc/sysctl.conf</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>net.ipv4.ip_forward<span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div>
<p>To active the setting either restart the server or run the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo sysctl -p
</pre></div>
</div>
</div>
</div>
<div class="section" id="vpn-client-incoming-win-7">
<h2>VPN client Incoming (Win 7)<a class="headerlink" href="#vpn-client-incoming-win-7" title="Permalink to this headline">¶</a></h2>
<p>See the print screens to how to setup the VPN incoming connection on Windows 7.</p>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>If VPN is setup by default to relay all traffic through the VPN connection. To avoid this you need to uncheck.</p>
</div>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="../../../_images/vpn_1.png"><img alt="../../../_images/vpn_1.png" src="../../../_images/vpn_1.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Start VPN setup</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="../../../_images/vpn_2.png"><img alt="../../../_images/vpn_2.png" src="../../../_images/vpn_2.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Configure machine to connect to</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="../../../_images/vpn_3.png"><img alt="../../../_images/vpn_3.png" src="../../../_images/vpn_3.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Configure user credentials</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="../../../_images/vpn_4.png"><img alt="../../../_images/vpn_4.png" src="../../../_images/vpn_4.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Change IPv4 and ipv6 properties</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="../../../_images/vpn_5.png"><img alt="../../../_images/vpn_5.png" src="../../../_images/vpn_5.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Goto advanced properties</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="../../../_images/vpn_6.png"><img alt="../../../_images/vpn_6.png" src="../../../_images/vpn_6.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Uncheck user default gateway</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
              
          </main>
          

      </div>
    </div>

    <script src="../../../_static/js/index.js"></script>
    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-20699788-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2004-2020, tschinz.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>